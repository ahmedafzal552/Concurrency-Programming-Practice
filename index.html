<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=Welco, initial-scale=1.0">
    <title>Cool Web Server</title>
</head>
<body>
    Welcome to the HTML version of the WebServer
    <form action="/form" method="post">
        <label for="username">Username:</label>
        <input type="text" name="username" id="">
        <label for="password">Password:</label>
        <input type="password" name="password" id="">
        <button type="submit">Submit form</button>
    </form>
    <div id="chat-container">

    </div>
    <textarea name="new-chat" id="new-chat"></textarea>
    <button id="send-new-chat">Send Message</button>
    <script>
        const PORT = 3000;
        const url = `ws://localhost:${PORT}`
        const wsServer = new WebSocket(url);

        const newChat = document.getElementById("new-chat");
        function sendMessage() {
            console.log(newChat.value);
            if (newChat.value) {
                const data = {
                    message: newChat.value
                }
                //Check the chrome Web Tools
                console.log(data);
                console.log(JSON.stringify(data));
                wsServer.send(JSON.stringify(data));
                newChat.value = "";
            }
        }
        const sendNewChatButton = document.getElementById("send-new-chat");
        sendNewChatButton.addEventListener("click", () => {
            sendMessage();
        })
    </script>
</body>
</html>